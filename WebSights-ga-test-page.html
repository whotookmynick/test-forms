<html>

<head>
    <title>Team 12 WebSights GA test page</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-67NZC88G7E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-67NZC88G7E');
    </script>
</head>

<script>
    window.gaLoadedInterval = setInterval(function () {
        if (typeof (ga) === 'function') {
            clearInterval(window.gaLoadedInterval);
            const urlSearchParams = new URLSearchParams(window.location.search);
            let { websiteId, urlVisited, ip } = Object.fromEntries(urlSearchParams.entries());
            const fetchOpts = { method: 'GET' };
            if (!websiteId) {
                websiteId = window.prompt('Please enter the WebSights domain id (found in the snippet)')
            }
            // if (!urlVisited) {
            //     urlVisited = window.prompt('Please enter the url that is being visited')
            // }
            if (!ip) {
                ip = window.prompt('Please enter an IP of a desired company to visit (optional)')
            }

            if (ip) fetchOpts.headers = { 'x-appengine-user-ip': ip };
            // if (urlVisited) fetchOpts.headers = { 'referer': urlVisited };
            // fetchOpts.headers = { 'origin': 'http://www.zoominfo.com/' };
            fetch(`https://ws-staging.zoominfo.com/pixel/${websiteId}`, fetchOpts);
        }
    }, 300)
    setTimeout(function () {clearInterval(window.gaLoadedInterval);}, 2000)
</script>

<body>
</body>

<script>
</script>

</html>
